我们将上一节的程序改写了一下，让它能在真机上运行。
1.我们在asmhead.nas中加上了一段程序，用于确认VBE是否存在。若不存在就只能使用320*200画面了
2.确认VBE存在后还要确认其版本，不是2.0以上，就不能使用高分辨率。
3.再之后，我们要通过VBE来查看一下画面模式0x105能不能使用：先取得画面模式信息，再确认如下三项（颜色数是否为8；是否为调色板模式；画面模式号码可否加上0x4000再进行指定）
4.确认可以使用指定的画面模式之后，我们就设置模式，并且将分辨率及VRAM的地址等信息复制到BOOTINFO中，即记录下当前设定的画面模式信息。设置完毕后跳转到在BIOS中查询键盘状态的地方。
5.在VBE不存在，或者版本不够，或者模式有问题的情况下，我们就跳转到320*200的画面模式设置的程序段。